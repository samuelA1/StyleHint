<ion-header *ngIf="titleService.modal">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button>
          <ion-icon color="dark" style="height: 41px; width: 32px;" name="contact"></ion-icon>
      </ion-menu-button>
    </ion-buttons>
    <ion-buttons slot="end">
        <ion-button (click)="clearNotifications()" >
            <ion-icon color="dark"  name="notifications"></ion-icon>
            <ion-badge color="danger" *ngIf="notificationService.numberOfNotifications > 0">{{notificationService.numberOfNotifications}}</ion-badge>
        </ion-button>
    </ion-buttons>
    <ion-title *ngIf="showWeather">
      StyleHint 
    </ion-title>
    <ion-title *ngIf="!showWeather">
      News
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content scrollY="{{titleService.modal}}">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      refreshingSpinner="circles">
    </ion-refresher-content>
  </ion-refresher>
  <!-- suggestion modal -->
  <div padding *ngIf="!titleService.modal" class="modal-content ">
      <div class="modal-c">
        <ion-buttons style="float: right" slot="end">
            <ion-button (click)="close()" >
                <ion-icon color="dark"  name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
        <h1>Welcome!</h1>
        <h6>We selected some hints we think you might be interested in.</h6>
        <div  *ngFor="let suggest of suggestions; let i = index">
          <img (click)="viewHint(suggest._id)" *ngIf="i == imgIndex" class="fade" src="{{suggest.url}}" >
        </div>
        <!-- Next and previous buttons -->
        <ion-buttons class="next" *ngIf="imgIndex < 4">
            <ion-button (click)="next()">
                <ion-icon color="warning"  name="arrow-forward"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-buttons class="prev" *ngIf="imgIndex > 0">
            <ion-button (click)="prev()">
                <ion-icon color="warning"  name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
      </div>
  </div>
  <!-- weather showcase -->
    <div class="card" *ngIf="location.city && showWeather">
      <div class="card-container">
        <div class="ion-float-left">
            <h6>{{location.city}}, {{location.state}}</h6>
            <small>{{location.country}}</small>
            <p>{{date | date:'EEEE, MMMM d'}}</p> 
        </div>
        <p>{{weather.temp}}&#8451;</p>
        <div class="weather-icon">
            <img src="{{weather.icon}}" alt="weather-image">
            <p>{{weather.main}}</p>
        </div>
      </div>
    </div>

    <h6 *ngIf="!location.city && showWeather" class="animated pulse infinite">Getting your location...</h6>

  
  <ion-slides pager="false"  #slides [options]="slideOpts" (ionSlideWillChange)="toggleShowCase()" >
      
      <!-- News slide -->
        <ion-slide  >
            <ion-grid>
                <ion-row>
                  <ion-col>
                      <ion-list >
                        <ion-item (click)="toNews(news._id)" *ngFor="let news of allNews" style="width: 80%">
                          <ion-thumbnail slot="end" >
                            <img [src]="news.url" style="border-radius: 8px">
                          </ion-thumbnail>
                          <ion-label >
                            <small>{{news.genre}}</small> | <small>{{GetPostTime(news.createdAt)}}</small>
                            <h2>{{news.headline}}</h2>
                            <p>{{news.likedBy?.length}} people liked this news</p>
                          </ion-label>
                        </ion-item>
                      </ion-list>
                  </ion-col>
                </ion-row>
            </ion-grid>
        </ion-slide>
        
        <!-- Home slide -->
        <ion-slide  class="step-two">
            <!-- Occasion cards -->
            <h5>Occasion</h5>
            <small>Choose the occasion or event you're interested in.</small>
            <div class="selection-panes" [class.overlay]="itemSelected">
              <ion-card [class.hide-card]="titleService.appPages[3].value == 'female kid' && occasion.name == 'date night'
              || titleService.appPages[3].value == 'male kid' && occasion.name == 'date night'
                || titleService.appPages[3].value == 'female kid' && occasion.name == 'job interview'
                || titleService.appPages[3].value == 'male kid' && occasion.name == 'job interview'" *ngFor="let occasion of occasions">
                  <ion-card-content  [class.chose]="occasion.isChosen" (click)="chooseOccasion(occasion.icon)">
                      <ion-icon [name]="occasion.icon"></ion-icon>
                      <p>{{occasion.name | titlecase}}</p>
                  </ion-card-content>
              </ion-card>
            </div>

            <div *ngIf="changeSeason">
                <!-- Season cards -->
              <h5>Season</h5>
              <small padding>It's currently <b>{{season | titlecase}}</b> in your area, you can choose the season which best suits you.</small>
              <div class="selection-panes">
                <ion-card *ngFor="let season of seasons">
                    <ion-card-content [class.chose]="season.isChosen" (click)="chooseSeason(season.name)">
                        <ion-icon [name]="season.icon"></ion-icon>
                        <p>{{season.name | titlecase}}</p>
                    </ion-card-content>
                </ion-card>
              </div>
              <!-- Weather cards -->
              <h5>Weather</h5>
                <small *ngIf="weather.main == 'Clear'"> It's currently </small>
                <small *ngIf="weather.main !== 'Clear'">Your area is currently covered with </small>
                <small><b>{{weather.main | titlecase}}</b></small>
                <small>, you can choose the weather condition which best suits you.</small>
              <div class="selection-panes">
                <ion-card *ngFor="let weather of weathers">
                  <ion-card-content [class.chose]="weather.isChosen" (click)="chooseWeather(weather.name)">
                      <ion-icon [name]="weather.icon"></ion-icon>
                      <p>{{weather.name | titlecase}}</p>
                  </ion-card-content>
                </ion-card>
              </div>
            </div>

            <ion-text color="secondary" (click)="change()" padding>
              <p>Customize season and weather <b *ngIf="!changeSeason">&#62;</b><b *ngIf="changeSeason">&#8593;</b></p>
            </ion-text>
        </ion-slide>
    
        <!-- slide three -->
        <!-- <ion-slide  class="step-three">
          
        </ion-slide> -->
    </ion-slides>

    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)" *ngIf="!showWeather">
        <ion-infinite-scroll-content
          loadingSpinner="bubbles"
          loadingText="Loading more news...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll>

  <ion-fab *ngIf="titleService.modal" horizontal="end" activated={{titleService.activateHome}} vertical="bottom" slot="fixed" >
    <ion-fab-button color="secondary" >
      <ion-icon name="arrow-dropleft" role="img" aria-label="arrow dropleft"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="start" >
      <ion-fab-button (click)="toCloset()" style="width: 89px" color="dark">
        <ion-icon style="position: absolute; top: 0" name="shirt" role="img"></ion-icon>
        <p style="margin-bottom: inherit">closet</p>
      </ion-fab-button>
      <ion-fab-button (click)="toTips()" style="width: 89px" color="dark">
        <ion-icon style="position: absolute; top: 0" name="open" role="img"></ion-icon>
        <p style="margin-bottom: inherit">Tips</p>
      </ion-fab-button>
      <ion-fab-button (click)="toFriends()" style="width: 89px" color="dark">
        <ion-icon style="position: absolute; top: 0" name="people" role="img"></ion-icon>
        <p style="margin-bottom: inherit">Friends</p>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>