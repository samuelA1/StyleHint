<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-button (click)="navigateBack()">
              <ion-icon color="dark"  name="arrow-back" class="ion-margin-start"></ion-icon>
          </ion-button>
      </ion-buttons>
    <ion-title>Update Card</ion-title>
  <ion-progress-bar *ngIf="loading" type="indeterminate" color="medium"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content padding>
    <form #f="ngForm">
        <div >
            <ion-input [disabled]="true" #number="ngModel"  minlength="16" maxlength="16" name="number" pattern="[0-9]*" [(ngModel)]="card.number" type="text" placeholder="Card number" required></ion-input>
            <small *ngIf="number.errors?.pattern">Please enter a valid card number</small>
        </div>
        <ion-row>
          <ion-col size="6">
              <ion-input  #expMonth="ngModel" minlength="2" maxlength="2"  name="expMonth" [(ngModel)]="card.expMonth" type="text" placeholder="Exp month" pattern="[0-9]*" required></ion-input>
              <small *ngIf="expMonth.errors?.pattern">Please enter a valid card expiration month</small>
          </ion-col>
          <ion-col size="5">
              <ion-input  #expYear="ngModel" minlength="2" maxlength="2"  name="expYear" [(ngModel)]="card.expYear" type="text" placeholder="Exp year" pattern="[0-9]*" required></ion-input>
              <small *ngIf="expYear.errors?.pattern">Please enter a valid card expiration year</small>
          </ion-col>
        </ion-row>
        <ion-row>
            <ion-col size="6">
                <ion-input  #cvc="ngModel" minlength="3" maxlength="3" (ionBlur)="flippCard(false)" (ionFocus)="flippCard(true)" name="cvc" [(ngModel)]="card.cvc" type="text" placeholder="Security code" pattern="[0-9]*" required></ion-input>
                <small *ngIf="cvc.errors?.pattern">Please enter a valid security code</small>
            </ion-col>
            <ion-col size="5">
                <ion-input  #zip="ngModel"  name="zip" [(ngModel)]="card.zip" type="text" placeholder="Zip" pattern="[0-9]*"></ion-input>
                <small *ngIf="zip.errors?.pattern">Please enter a valid zip</small>
            </ion-col>
          </ion-row>
        <ion-button style="margin-top: 50px;" color="warning" shape="round" (click)="updateCard()" expand="block" size="large" [disabled]="!f.valid">
            Update Card
        </ion-button>
    </form>
</ion-content>
